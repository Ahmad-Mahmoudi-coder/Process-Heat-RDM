# configs/rdm_experiment_2035_BB.toml
# RDM experiment definition for 2035_BB (biomass / lower electrification counterfactual).
# Purpose: contrast with EB to show how strategy choice shifts grid upgrade needs.

[experiment]
name = "rdm_2035_BB_grid_upgrade"
epoch_tag = "2035_BB"
description = "RDM over grid upgrade choices for Edendale 2035 (BB variant) to contrast grid pressure vs EB."
sampling = "lhs"
n_futures = 100           # recommended for thesis PoC; use 200 for extended analysis
seed = 43
dt_h = 1.0

[strategy_settings]
default_mode = "force"
allow_auto_select = true

[paths]
headroom_csv = "C:/Model/Edendale GXP/outputs_latest/gxp_hourly_2035.csv"
headroom_col = "headroom_mw"
timestamp_col = "timestamp_utc"

incremental_csv = "Output/runs/<BUNDLE>/epoch2035_BB/dispatch_prop_v2/signals/incremental_electricity_MW_2035_BB.csv"
incremental_col = "incremental_electricity_MW"

upgrade_menu_toml = "Input/configs/grid_upgrades_southland_edendale.toml"

signals_config_toml = "Input/signals/signals_config.toml"
signals_epoch_key = "2035"

[decision_levers]
[[strategies]]
strategy_id = "S0_NONE"
mode = "force"
force_upgrade_name = "none"
label = "No upgrade (allow shedding)"

[[strategies]]
strategy_id = "S1_OPT1"
mode = "force"
force_upgrade_name = "fonterra_opt1_N_plus21MW"
label = "RETA opt1 (+21 MW, N)"

[[strategies]]
strategy_id = "S2_OPT2"
mode = "force"
force_upgrade_name = "fonterra_opt2_N-1_plus32MW"
label = "RETA opt2 (+32 MW, N-1)"

[[strategies]]
strategy_id = "S3_OPT3"
mode = "force"
force_upgrade_name = "fonterra_opt3_N_plus97MW"
label = "RETA opt3 (+97 MW, N)"

[[strategies]]
strategy_id = "S4_OPT4"
mode = "force"
force_upgrade_name = "fonterra_opt4_N_plus150MW"
label = "PoC extension (+150 MW, beyond RETA)"

[[strategies]]
strategy_id = "S_AUTO"
mode = "auto_select"
label = "Auto-select upgrade (min cost)"

# Uncertainties â€” BB is expected to have lower incremental MW,
# so tighten incremental bounds slightly (optional but reasonable).
[[uncertainties]]
u_id = "U_inc_mult"
kind = "scalar_multiplier"
target = "incremental_series"
bounds = [0.90, 1.10]
notes = "BB variant: incremental electricity is lower; retain uncertainty but narrower than EB."

[[uncertainties]]
u_id = "U_headroom_mult"
kind = "scalar_multiplier"
target = "headroom_series"
bounds = [0.70, 1.00]
notes = "Same headroom uncertainty as EB."

[[uncertainties]]
u_id = "U_upgrade_capex_mult"
kind = "scalar_multiplier"
target = "upgrade_capex_nzd"
bounds = [0.80, 1.50]
notes = "Screening-level capex uncertainty."

[[uncertainties]]
u_id = "U_voll"
kind = "discrete"
target = "voll_nzd_per_MWh"
options = [5000.0, 10000.0, 15000.0, 20000.0]
notes = "VOLL sensitivity: even in BB, this can flip whether small upgrades are justified."

[[uncertainties]]
u_id = "U_consents_uplift"
kind = "scalar_multiplier"
target = "consents_uplift_factor"
bounds = [1.00, 1.60]
notes = "Consenting/easement risk."

[metrics]
compute_total_cost = true
compute_regret = true
regret_baseline = "per_future_min"

shed_MWh_max = 0.1
max_exceed_MW_max = 0.01

report_quantiles = [0.05, 0.50, 0.95]
save_long_timeseries = false

[outputs]
output_root = "Output/runs/<BUNDLE>/epoch2035_BB/dispatch_prop_v2/rdm"
save_run_ledger = true
save_per_future_strategy_json = true
save_summary_csv = true
summary_csv_name = "rdm_summary_2035_BB.csv"
