# Thesis Figures Documentation

This document lists all figures generated by the PoC pipeline, organized by layer and epoch, with generation commands and suggested captions.

## Figure Organization

Figures are organized by:
1. **Demand Profile Figures** (DemandPack layer)
2. **Dispatch Figures** (Site dispatch layer)
3. **Regional Electricity Figures** (Optional extension)
4. **RDM Figures** (RDM screening layer)
5. **Comparison Figures** (Bundle-level)

## 1. Demand Profile Figures

**Layer:** DemandPack  
**Epochs:** 2020, 2025, 2028, 2035_EB, 2035_BB

**Generation:** Automatically generated by `scripts/run_poc_layers.ps1 -Layers demandpack`

**Command:**
```bash
python -m src.plot_demandpack --input-csv <staged_csv> --epoch-tag <epoch_tag> --outdir <bundle_figures_dir>
```

**Location:** `Output/runs/<bundle>/epoch<epoch_tag>/demandpack/figures/`

### Time Series Sample
**Path:** `Output/runs/<bundle>/epoch<epoch_tag>/demandpack/figures/demand_<epoch_tag>_timeseries_sample.png`

**Purpose:** Sample weeks showing representative periods (January, June, October).

**Suggested Caption:** "Hourly heat demand sample weeks for <epoch_tag>, showing representative periods from January (summer), June (winter), and October (spring)."

### Duration Curve
**Path:** `Output/runs/<bundle>/epoch<epoch_tag>/demandpack/figures/demand_<epoch_tag>_duration_curve.png`

**Purpose:** Load duration curve (sorted descending).

**Suggested Caption:** "Load duration curve for <epoch_tag>, showing the fraction of time heat demand exceeds a given level. Sorted in descending order of demand."

### Heatmap Day-Hour
**Path:** `Output/runs/<bundle>/epoch<epoch_tag>/demandpack/figures/demand_<epoch_tag>_heatmap_day_hour.png`

**Purpose:** Heatmap of average demand by day of week and hour of day.

**Suggested Caption:** "Average hourly heat demand by day of week and hour of day for <epoch_tag>, showing weekly and diurnal patterns."

### Monthly Totals
**Path:** `Output/runs/<bundle>/epoch<epoch_tag>/demandpack/figures/demand_<epoch_tag>_monthly_totals.png`

**Purpose:** Monthly totals bar chart (GWh).

**Suggested Caption:** "Monthly total heat demand for <epoch_tag>, showing seasonal variation in annual heat requirements."

### Average Diurnal by Season
**Path:** `Output/runs/<bundle>/epoch<epoch_tag>/demandpack/figures/demand_<epoch_tag>_avg_diurnal_by_season.png`

**Purpose:** Average diurnal profile grouped by season (Summer, Autumn, Winter, Spring).

**Suggested Caption:** "Average diurnal heat demand profile by season for <epoch_tag>, showing hourly patterns across different seasons."

### Legacy Diagnostic Plots (Optional)
**Note:** The full diagnostic suite (`src.plot_demandpack_diagnostics`) generates additional plots for validation and diagnostics. These are not automatically staged to bundles but can be generated separately if needed.

### Daily Envelope
**Path:** `Output/Figures/heat_<epoch>_daily_envelope.png`

**Command:** (Same as above)

**Purpose:** Daily min/max envelope of heat demand.

**Suggested Caption:** "Daily min/max envelope of heat demand for <epoch>, showing the range of hourly values within each day across the year."

### Hourly Means by Season
**Path:** `Output/Figures/heat_<epoch>_hourly_means_by_season.png`

**Command:** (Same as above)

**Purpose:** Average hourly profile by season.

**Suggested Caption:** "Average hourly heat demand profile by season for <epoch>, showing diurnal patterns and seasonal variations."

### Monthly Totals
**Path:** `Output/Figures/heat_<epoch>_monthly_totals.png`

**Command:** (Same as above)

**Purpose:** Monthly totals bar chart.

**Suggested Caption:** "Monthly total heat demand for <epoch>, showing seasonal variation in annual heat requirements."

### Load Duration Curve
**Path:** `Output/Figures/heat_<epoch>_LDC.png`

**Command:** (Same as above)

**Purpose:** Load duration curve (sorted hourly demand).

**Suggested Caption:** "Load duration curve for <epoch>, showing the fraction of time heat demand exceeds a given level. Sorted in descending order of demand."

### Weekday Profiles (February)
**Path:** `Output/Figures/heat_<epoch>_weekday_profiles_Feb.png`

**Command:** (Same as above)

**Purpose:** Weekday hourly profiles for February.

**Suggested Caption:** "Weekday hourly heat demand profiles for February <epoch>, showing typical diurnal patterns during summer months."

### Weekday Profiles (June)
**Path:** `Output/Figures/heat_<epoch>_weekday_profiles_Jun.png`

**Command:** (Same as above)

**Purpose:** Weekday hourly profiles for June.

**Suggested Caption:** "Weekday hourly heat demand profiles for June <epoch>, showing typical diurnal patterns during winter months."

### Load Histogram
**Path:** `Output/Figures/heat_<epoch>_load_histogram.png`

**Command:** (Same as above)

**Purpose:** Distribution of hourly load values.

**Suggested Caption:** "Distribution of hourly heat demand values for <epoch>, showing the frequency of different demand levels across the year."

## 2. Dispatch Figures

**Layer:** Site Dispatch  
**Epochs:** 2020, 2025, 2028, 2035_EB, 2035_BB

### Unit Stack Plot (Proportional Mode)
**Path:** `Output/runs/<bundle>/epoch<epoch_tag>/dispatch/<runid>/figures/heat_<epoch_tag>_unit_stack.png`

**Command:**
```bash
python -m src.site_dispatch_2020 --epoch <epoch_tag> --mode proportional --plot --demand-csv <demand_csv> --output-root Output --run-id <bundle>/epoch<epoch_tag>/dispatch/<runid>
```

**Purpose:** Stacked plot showing hourly heat dispatch by unit over the year.

**Suggested Caption:** "Hourly heat dispatch by unit for <epoch_tag>, showing proportional allocation across available units. Stacked areas represent unit contributions to total heat demand."

**Required for Thesis:** Yes - at least one per epoch (typically 2020, 2025, 2028, 2035_EB, 2035_BB).

### Unit Stack Plot (Optimal Mode)
**Path:** `Output/runs/<bundle>/epoch<epoch_tag>/dispatch/<runid>/figures/heat_<epoch_tag>_unit_stack_opt.png`

**Command:**
```bash
python -m src.site_dispatch_2020 --epoch <epoch_tag> --mode optimal_subset --plot --demand-csv <demand_csv> --output-root Output --run-id <bundle>/epoch<epoch_tag>/dispatch/<runid>
```

**Purpose:** Stacked plot showing hourly heat dispatch by unit (optimal mode).

**Suggested Caption:** "Hourly heat dispatch by unit for <epoch_tag> using optimal subset selection. Units are committed in weekly blocks to minimize total cost while meeting demand constraints."

### Units Online Plot
**Path:** `Output/runs/<bundle>/epoch<epoch_tag>/dispatch/<runid>/figures/heat_<epoch_tag>_units_online_opt.png`

**Command:** (Same as optimal mode)

**Purpose:** Plot showing which units are online over time (optimal mode only).

**Suggested Caption:** "Unit commitment schedule for <epoch_tag> showing which units are online (1) or offline (0) over the year. Commitment blocks reflect weekly optimization windows."

### Utilisation Duration Curves
**Path:** `Output/runs/<bundle>/epoch<epoch_tag>/dispatch/<runid>/figures/heat_<epoch_tag>_unit_utilisation_duration_opt.png`

**Command:** (Same as optimal mode)

**Purpose:** Utilisation duration curves for each unit (optimal mode only).

**Suggested Caption:** "Utilisation duration curves for each unit in <epoch_tag>, showing the fraction of time each unit operates at or above a given utilisation level. Curves are sorted by decreasing utilisation."

## 3. Regional Electricity Signals Figures

**Layer:** Regional Signals (PoC)  
**Epochs:** All epochs (2020, 2025, 2028, 2035_EB, 2035_BB)

**Generation:** Automatically generated by `scripts/run_poc_layers.ps1 -Layers regional_signals`

**Command:**
```bash
python -m src.generate_regional_signals_poc --epoch-tag <epoch_tag> --outdir <output_dir>
```

**Location:** `Output/runs/<bundle>/epoch<epoch_tag>/regional_signals/<runid>/figures/`

### Headroom Duration Curve
**Path:** `Output/runs/<bundle>/epoch<epoch_tag>/regional_signals/<runid>/figures/headroom_duration_curve_<epoch_tag>.png`

**Purpose:** Headroom duration curve (sorted descending).

**Suggested Caption:** "Headroom duration curve for <epoch_tag>, showing the fraction of time headroom exceeds a given level. Sorted in descending order of headroom."

### Headroom Time Series Week
**Path:** `Output/runs/<bundle>/epoch<epoch_tag>/regional_signals/<runid>/figures/headroom_timeseries_week_<epoch_tag>.png`

**Purpose:** One representative week of headroom (first week of February).

**Suggested Caption:** "Headroom time series for <epoch_tag> showing a representative week (first week of February), illustrating seasonal and weekly patterns in available grid capacity."

### Tariff Time Series Week
**Path:** `Output/runs/<bundle>/epoch<epoch_tag>/regional_signals/<runid>/figures/tariff_timeseries_week_<epoch_tag>.png`

**Purpose:** One representative week of tariff (first week of February).

**Suggested Caption:** "Tariff time series for <epoch_tag> showing a representative week (first week of February). For PoC, uses flat tariff from signals config (no time-of-use variation)."

## 4. RDM Figures

**Layer:** RDM Screening  
**Epochs:** 2035_EB, 2035_BB

**Note:** RDM figures are generated by `src/run_rdm.py` (full RDM experiments), not by `src/run_rdm_2035.py` (PoC screening). The PoC screening module focuses on CSV summaries rather than figures.

**If Full RDM Experiments are Run:**
- Regret CDF plots: `Output/runs/<bundle>/epoch<epoch_tag>/dispatch/<runid>/rdm/<experiment_name>/figures/regret_cdf.png`
- Total cost boxplots: `Output/runs/<bundle>/epoch<epoch_tag>/dispatch/<runid>/rdm/<experiment_name>/figures/total_cost_boxplot.png`
- Shed energy histograms: `Output/runs/<bundle>/epoch<epoch_tag>/dispatch/<runid>/rdm/<experiment_name>/figures/shed_hist.png`
- Shed fraction histograms: `Output/runs/<bundle>/epoch<epoch_tag>/dispatch/<runid>/rdm/<experiment_name>/figures/shed_fraction_hist.png`

**Location:** `Output/runs/<bundle>/epoch<epoch_tag>/dispatch/<runid>/rdm/<experiment_name>/figures/`

## 5. Comparison Figures

**Layer:** Bundle-Level  
**Epochs:** 2035_EB vs 2035_BB

**Note:** The pathway comparator (`src/compare_pathways_2035.py`) currently generates CSV and markdown outputs only. Figures can be generated separately if needed for thesis presentation.

**Potential Figures:**
- Cost comparison bar charts
- Emissions comparison bar charts
- Electricity consumption comparison
- RDM robustness comparison (regret, satisficing rates)

**Location:** `Output/runs/<bundle>/thesis_pack/figures/` (if generated)

## Figure Selection for Thesis Pack

The thesis pack curation process (`scripts/run_poc_layers.ps1 -Layers thesis_pack`) selects key figures for thesis presentation:

**Required Figures:**
- At least one demand profile plot per epoch (typically timeseries or LDC)
- Unit stack plot for each epoch (2020, 2025, 2028, 2035_EB, 2035_BB)
- Comparison figures for 2035_EB vs 2035_BB (if generated)

**Optional Figures:**
- Additional diagnostic plots for validation
- RDM robustness figures (if full RDM experiments are run)
